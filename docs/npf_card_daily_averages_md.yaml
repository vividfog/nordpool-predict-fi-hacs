type: markdown
title: Päivittäiset hinnat
entity_id:
  - sensor.nordpool_predict_fi_daily_average_price
content: |-
  {% set days = state_attr('sensor.nordpool_predict_fi_daily_average_price', 'daily_averages') or [] %}
  {% if days %}
  {% set weekdays = ['ma', 'ti', 'ke', 'to', 'pe', 'la', 'su'] -%}
  | Päivä | Keskihinta<br>¢/kWh | Min<br>¢/kWh | Max<br>¢/kWh |
  | :---: | :---: | :---: | :---: |
  {% for day in days -%}
  {% set day_obj = day.date | as_datetime -%}
  {% set weekday = weekdays[day_obj.weekday()] -%}
  {% set values = day.points | map(attribute='value') | list -%}
  {% set min_value = values | min if values else None -%}
  {% set max_value = values | max if values else None -%}
  | {{ weekday }} {{ day_obj.strftime('%Y-%m-%d') }} | {{ '%.1f' | format(day.average) }} | {{ '%.1f' | format(min_value) if min_value is not none else '—' }} | {{ '%.1f' | format(max_value) if max_value is not none else '—' }} |
  {% endfor %}
  {% else %}
  Ei päivittäisiä hintatietoja saatavilla.
  {% endif %}
